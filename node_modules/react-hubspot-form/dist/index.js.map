{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;AAEA,IAAI,WAAW,CAAf;;IAEM,W;;;AACL,sBAAY,KAAZ,EAAmB;AAAA;;AAAA,wHACZ,KADY;;AAElB,QAAK,KAAL,GAAa;AACZ,WAAQ;AADI,GAAb;AAGA,QAAK,EAAL,GAAU,UAAV;AACA,QAAK,UAAL,GAAkB,MAAK,UAAL,CAAgB,IAAhB,OAAlB;AACA,QAAK,eAAL,GAAuB,MAAK,eAAL,CAAqB,IAArB,OAAvB;AAPkB;AAQlB;;;;+BACY;AAAA;;AACZ,OAAI,OAAO,KAAX,EAAkB;AACjB;AACA,QAAI,KAAK,EAAL,KAAY,IAAhB,EAAsB;AACrB;AACA;AACD,QAAI,qBACA,KAAK,KADL,CAAJ;AAGA,WAAO,MAAM,OAAb;AACA,WAAO,MAAM,QAAb;AACA,WAAO,MAAM,OAAb;AACA,QAAI,uBACA,KADA;AAEH,mBAAY,KAAK,EAAL,CAAQ,YAAR,MAFT;AAGH,mBAAe,sBAAC,KAAD,EAAW;AACzB;AACA,UAAI,WAAW,MAAM,cAAN,EAAf;AACA,aAAK,KAAL,CAAW,QAAX,CAAoB,QAApB;AACA;AAPE,MAAJ;AASA,WAAO,KAAP,CAAa,KAAb,CAAmB,MAAnB,CAA0B,OAA1B;AACA,WAAO,IAAP;AACA,IAtBD,MAuBI;AACH,eAAW,KAAK,UAAhB,EAA4B,CAA5B;AACA;AACD;;;+BACY;AAAA;;AACZ,OAAI,SAAS,SAAS,aAAT,UAAb;AACA,UAAO,KAAP,GAAe,IAAf;AACA,UAAO,MAAP,GAAgB,YAAM;AACrB,WAAK,UAAL;AACA,WAAK,eAAL;AACA,IAHD;AAIA,UAAO,GAAP;AACA,YAAS,IAAT,CAAc,WAAd,CAA0B,MAA1B;AACA;;;oCACgB;AAChB;AACA,OAAI,KAAK,EAAL,KAAY,IAAhB,EAAsB;AACrB;AACA;AACD,OAAI,OAAO,KAAK,EAAL,CAAQ,aAAR,UAAX;AACA,OAAG,IAAH,EAAQ;AACP,SAAK,QAAL,CAAc,EAAE,QAAQ,IAAV,EAAd;AACA,QAAI,KAAK,KAAL,CAAW,OAAf,EAAwB;AACvB,UAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB;AACA;AACD,IALD,MAMI;AACH,eAAW,KAAK,eAAhB,EAAiC,CAAjC;AACA;AACD;;;sCACmB;AACnB,OAAI,CAAC,OAAO,KAAR,IAAiB,CAAC,KAAK,KAAL,CAAW,QAAjC,EAA2C;AAC1C,SAAK,UAAL;AACA,IAFD,MAEO;AACN,SAAK,UAAL;AACA,SAAK,eAAL;AACA;AACD;;;yCACsB,CACtB;;;2BACQ;AAAA;;AACR,UACC;AAAA;AAAA;AACC;AACC,UAAK;AAAA,aAAM,OAAK,EAAL,GAAU,EAAhB;AAAA,MADN;AAEC,8BAAuB,KAAK,EAF7B;AAGC,YAAO,EAAE,SAAS,KAAK,KAAL,CAAW,MAAX,GAAoB,OAApB,GAA8B,MAAzC;AAHR,MADD;AAME,KAAC,KAAK,KAAL,CAAW,MAAZ,IAAsB,KAAK,KAAL,CAAW;AANnC,IADD;AAUA;;;;EArFwB,gBAAM,S;;kBAwFjB,W","file":"index.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\n\nlet globalId = 0\n\nclass HubspotForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tloaded: false\n\t\t}\n\t\tthis.id = globalId++\n\t\tthis.createForm = this.createForm.bind(this)\n\t\tthis.findFormElement = this.findFormElement.bind(this)\n\t}\n\tcreateForm() {\n\t\tif (window.hbspt) {\n\t\t\t// protect against component unmounting before window.hbspt is available\n\t\t\tif (this.el === null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlet props = {\n\t\t\t\t...this.props\n\t\t\t}\n\t\t\tdelete props.loading\n\t\t\tdelete props.onSubmit\n\t\t\tdelete props.onReady\n\t\t\tlet options = {\n\t\t\t\t...props,\n\t\t\t\ttarget: `#${this.el.getAttribute(`id`)}`,\n\t\t\t\tonFormSubmit : ($form) => {\n\t\t\t\t\t// ref: https://developers.hubspot.com/docs/methods/forms/advanced_form_options\n\t\t\t\t\tvar formData = $form.serializeArray();\n\t\t\t\t\tthis.props.onSubmit(formData);\t\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.hbspt.forms.create(options)\n\t\t\treturn true\n\t\t}\n\t\telse{\n\t\t\tsetTimeout(this.createForm, 1)\n\t\t}\n\t}\n\tloadScript() {\n\t\tlet script = document.createElement(`script`)\n\t\tscript.defer = true\n\t\tscript.onload = () => {\n\t\t\tthis.createForm()\n\t\t\tthis.findFormElement()\n\t\t}\n\t\tscript.src = `//js.hsforms.net/forms/v2.js`\n\t\tdocument.head.appendChild(script)\n\t}\n\tfindFormElement(){\n\t\t// protect against component unmounting before form is added\n\t\tif (this.el === null) {\n\t\t\treturn\n\t\t}\n\t\tlet form = this.el.querySelector(`iframe`)\n\t\tif(form){\n\t\t\tthis.setState({ loaded: true })\n\t\t\tif (this.props.onReady) {\n\t\t\t\tthis.props.onReady(form);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tsetTimeout(this.findFormElement, 1)\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tif (!window.hbspt && !this.props.noScript) {\n\t\t\tthis.loadScript()\n\t\t} else {\n\t\t\tthis.createForm()\n\t\t\tthis.findFormElement()\n\t\t}\n\t}\n\tcomponentWillUnmount() {\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tref={el => this.el = el}\n\t\t\t\t\tid={`reactHubspotForm${this.id}`}\n\t\t\t\t\tstyle={{ display: this.state.loaded ? 'block' : 'none'}}\n\t\t\t\t\t/>\n\t\t\t\t{!this.state.loaded && this.props.loading}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default HubspotForm\n"]}